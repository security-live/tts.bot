<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <title>TTS.bot by Security_Live</title>
    <meta charset="utf-8" />

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <div id="loggedin" style="display: none" class="main-container container-fluid">
      <div class="topHeader row">
        <div class="col-md-2 text-left">
          <!-- Content for the left-aligned div -->
          <div id="title">tts.bot</div>
          <div id="stsCurrentLang"></div>
        </div>
        <div class="col-8 text-center">
          <!-- Content for the center-aligned div -->
          <!-- Content for the center-aligned div -->
          <label for="channel">Channel:</label>
          <input
            type="text"
            id="channel"
            name="channel"
            class="bg-dark text-white"
            value
            placeholder="Channel"
          />
          <button
            type="button"
            id="btn-go"
            class="btn btn-dark"
            onclick="connect()"
          >
            Go
          </button>
          <button
            type="button"
            id="btn-rcb"
            class="btn btn-dark"
            onclick="readCopyBuffer()"
          >
            Read Copy Buffer
          </button>          
          <button
            type="button"
            id="btn-stop"
            class="btn btn-dark"
            onclick="location.href='index.html?autoconnect=false';"
          >
            Stop
          </button>
          <button
            type="button"
            id="btn-pause"
            class="btn btn-dark"
            onclick="pause()"
          >
            <i class="fa fa-pause" aria-hidden="true"></i>
          </button>

          <button
            type="button"
            id="btn-vr-go"
            class="btn btn-dark"
            onclick="window.audioPlayer.StartVoiceRecognition()"
          >
            Start Voice Recognition
          </button>
        </div>
        <div class="col-md-2 text-right">
          <!-- Content for the right-aligned div -->
          <span id="status">Disconnected</span><br />
          <span id="queueCount">Messages Queued(0)</span>

          <button
            type="button"
            id="cct-popup"
            class="btn btn-default"
            onclick="toggleCCTPopup()"
          >
            <i class="fa-regular fa-message"></i>
          </button>

          <button
            type="button"
            id="settings-gear"
            class="btn btn-default"
            onclick="toggleSettingsMenu()"
          >
            <i class="fa fa-cog"></i>
          </button>
        </div>
      </div>

      <div class="row settings-menu" id="settingsMenu" style="display: none">
        <!-- Move all settings options here -->

        <!-- The rest of your HTML code remains the same -->

        <div>
          <div id="settings" class="container-fluid">
            <!-- Top Header -->

            <div class="row" style="padding: 20px">
              <div class="col-md-6">
                <div class="form-group">
                  <dt>
                    <label for="twitch_username">Token credentials:</label>
                  </dt>
                  <dd class="clearfix">
                    <input
                      type="text"
                      id="twitch_username"
                      class="form-control"
                      value
                      placeholder="twitch username"
                      disabled
                    />
                  </dd>
                </div>

                <div id="srcLangPlaceholder" class="form-group"></div>

                <div id="dstLangPlaceholder" class="form-group"></div>

                <div id="systemVoicePlaceholder" class="form-group"></div>                
                <div id="defaultChatterVoicePlaceholder" class="form-group"></div> 

                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbSpeak"
                    onchange="saveOption(this)"
                    value="Speak"
                    checked
                  />
                  <label class="form-check-label" for="cbSpeak">
                    TTS Enabled
                  </label>
                </div>

                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbAutoTranslateChat"
                    onchange="saveOption(this)"
                  />
                  <label class="form-check-label" for="cbAutoTranslateChat">
                    Auto translate chat and output to channel (Be aware this
                    will send translations to any channel connected)
                  </label>
                </div>

                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbUseVoiceForSelectedLanguage"
                    onchange="saveOption(this)"
                  />
                  <label class="form-check-label" for="cbUseVoiceForSelectedLanguage">
                    If the chatter's voice does not match the language a voice will be selected randomly according to gender for selected language if possible.
                  </label>
                </div>                

                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbDeleteCommands"
                    onchange="saveOption(this)"
                  />
                  <label class="form-check-label" for="cbDeleteCommands">
                    Delete all channel commands that start with !
                  </label>
                </div>

                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbEveryoneTTS"
                    onchange="saveOption(this)"
                    checked
                  />
                  <label class="form-check-label" for="cbEveryoneTTS">
                    Allow Everyone to use TTS
                  </label>
                </div>

                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbModTTS"
                    onchange="saveOption(this)"
                    checked
                  />
                  <label class="form-check-label" for="cbModTTS">
                    Allow Mods to use TTS
                  </label>
                </div>

                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbVipTTS"
                    onchange="saveOption(this)"
                    checked
                  />
                  <label class="form-check-label" for="cbVipTTS">
                    Allow Vips to use TTS
                  </label>
                </div>

                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbSubTTS"
                    onchange="saveOption(this)"
                    checked
                  />
                  <label class="form-check-label" for="cbSubTTS">
                    Allow Subs to use TTS
                  </label>
                </div>

                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbReplaceAtNames"
                    onchange="saveOption(this)"
                    checked
                  />
                  <label class="form-check-label" for="cbReplaceAtNames">
                    Replace @usernames with spoken names in all messages.
                  </label>
                </div>

                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbSpeakOtherAtNames"
                    onchange="saveOption(this)"
                  />
                  <label class="form-check-label" for="cbSpeakOtherAtNames">
                    Speak @username messages referencing others.
                  </label>
                </div>

                <div class="form-check d-inline-block">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbSpeakEmotesTTS"
                    onchange="saveOption(this)"
                    checked
                  />
                  <label class="form-check-label" for="cbSpeakEmotesTTS">
                    Speak emotes
                  </label>
                </div>

                <div class="form-check d-inline-block">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbDedupEmotesTTS"
                    onchange="saveOption(this)"
                    checked
                  />
                  <label class="form-check-label" for="cbDedupEmotesTTS">
                    Dedup emotes
                  </label>
                </div>

                <div class="form-check d-inline-block">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbTranslateEmotesTTS"
                    onchange="saveOption(this)"
                  />
                  <label class="form-check-label" for="cbTranslateEmotesTTS">
                    Translate emotes
                  </label>
                </div>                

                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbCleanupTranslation"
                    onchange="saveOption(this)"
                  />
                  <label class="form-check-label" for="cbCleanupTranslation">
                    If translation is identical to original message don't
                    translate.
                  </label>
                </div>

                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbUserLevDistance"
                    onchange="saveOption(this)"
                    checked
                  />
                  <label class="form-check-label" for="cbUserLevDistance">
                    Don't speak user message if they are a % similar to the last
                    messages in the last X seconds. (Levenshtein distance)
                  </label>
                </div>
                <label for="txtUserLevPct"
                  >Percent:
                  <input
                    style="display: inline-block; width: 75px"
                    type="number"
                    size="5"
                    id="txtUserLevPct"
                    class="form-control"
                    value="90"
                    placeholder="90"
                    oninput="saveOption(this)"
                /></label>
                <label for="txtUserLevTime">
                  Time:
                  <input
                    style="display: inline-block; width: 75px"
                    type="number"
                    size="5"
                    id="txtUserLevTime"
                    class="form-control"
                    value="300"
                    placeholder="300"
                    oninput="saveOption(this)"
                /></label>

                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbChatLevDistance"
                    onchange="saveOption(this)"
                    checked
                  />
                  <label class="form-check-label" for="cbChatLevDistance">
                    Don't speak chat messages if they are a % similar to the
                    last messages in the last X seconds. (Levenshtein distance)
                  </label>
                </div>
                <div class="form-check">
                <label for="txtChatLevPct"
                  >Percent:
                  <input
                    style="display: inline-block; width: 75px"
                    type="number"
                    size="5"
                    id="txtChatLevPct"
                    class="form-control"
                    value="90"
                    placeholder="90"
                    oninput="saveOption(this)"
                /></label>
                <label for="txtChatLevTime">
                  Time:
                  <input
                    style="display: inline-block; width: 75px"
                    type="number"
                    size="5"
                    id="txtChatLevTime"
                    class="form-control"
                    value="300"
                    placeholder="300"
                    oninput="saveOption(this)"
                /></label>
              </div>

                <div class="form-check d-inline-block">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbReadWhispers"
                    onchange="saveOption(this)"
                  />
                  <label class="form-check-label" for="cbReadWhispers">
                    Read Whispers
                  </label>
                </div>
                <div class="form-check d-inline-block">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbReadWhispersModsOnly"
                    onchange="saveOption(this)"
                  />
                  <label class="form-check-label" for="cbReadWhispersModsOnly">
                    Mods Only
                  </label>
                </div>
                <div class="form-check d-inline-block">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbActuallyWhisperWhispers"
                    onchange="saveOption(this)"
                  />
                  <label class="form-check-label" for="cbActuallyWhisperWhispers">
                    Actually Whisper Messages with SSML
                  </label>
                </div>    
                
                <div class="form-check d-inline-block">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbAutoShoutoutRaids"
                    onchange="saveOption(this)"
                    checked
                  />
                  <label class="form-check-label" for="cbAutoShoutoutRaids">
                    Auto Twitch shoutout on Raid
                  </label>
                </div>  

                <div class="sts-options-wrapper">
                  <div class="sts-options-title">Speech -&gt; Translation -&gt; Speech (STS) Options</div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="cbSTS" onchange="saveOption(this)" />
                    <label class="form-check-label" for="cbSTS">
                      Enable STS (Chrome or Safari(maybe) only, browser must have Webkit Voice Recognition)
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="cbSendSpeechTranslation" onchange="saveOption(this)" />
                    <label class="form-check-label" for="cbSendSpeechTranslation">
                      Send Spoken Text and Translation to Channel (Be aware this will send translations to any channel connected)
                    </label>
                  </div>

                  <div id="stsLangPlaceholder"></div>
                  <div id="stsVoicePlaceholder"></div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="cbSetLangFromLastChat" onchange="saveOption(this)" />
                    <label class="form-check-label" for="cbSetLangFromLastChat">
                      Set language and voice to match the last translated chat message.
                    </label>
                  </div>                  
  
                </div>              
                
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  These options require microphone access:<br />
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="cbPauseTTSOnSpeech"
                      onchange="saveOption(this)"
                      checked
                    />
                    <label class="form-check-label" for="cbPauseTTSOnSpeech">
                      Pause TTS when speaking. (Must allow mic access and choose
                      correct mic input)
                    </label>
                    <label for="txtTTSWaitTime">
                      Time to wait after speaking to continue TTS:
                      <input
                        style="display: inline-block; width: 75px"
                        type="number"
                        size="5"
                        id="txtTTSWaitTime"
                        class="form-control"
                        value="2"
                        placeholder="2"
                        oninput="saveOption(this)"
                    /></label>
                  </div>

                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="cbPoofMessage"
                      onchange="saveOption(this)"
                    />
                    <label class="form-check-label" for="cbPoofMessage">
                      Say "poof" message to stop speaking a message and
                      continue.
                    </label>
                  </div>
                  <label class="d-block mb-1"
                    ><input
                      type="text"
                      size="80"
                      id="txtPoofRegex"
                      class="form-control"
                      value="(poof|proof|poop)"
                      placeholder="example regex: (poof|proof|poop)"
                      onchange="saveOption(this)"
                  /></label>

                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="cbBanHammer"
                      onchange="saveOption(this)"
                    />
                    <label class="form-check-label" for="cbBanHammer">
                      Say "ban" message to stop speaking and speak "ban
                      confirmation" message.
                    </label>
                  </div>
                  <label class="d-block mb-4"
                    ><input
                      type="text"
                      size="80"
                      id="txtBanRegex"
                      class="form-control"
                      value="(band hammer|ben hammer|ban hammer|banhammer|ben hammer|jan hammer)"
                      placeholder="example regex: (ben hammer|ban hammer|banhammer|ben hammer|jan hammer)"
                      oninput="saveOption(this)"
                  /></label>
                  <label class="d-block mb-4"
                    ><input
                      type="text"
                      size="80"
                      id="txtBanConfirmRegex"
                      class="form-control"
                      value="(affirmative)"
                      placeholder="example regex: (affirmative)"
                      oninput="saveOption(this)"
                  /></label>

                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="cbSendTextToWebsocket"
                      onchange="saveOption(this); enableCustomWebsocket(this.checked);"
                    />
                    <label class="form-check-label" for="cbSendTextToWebsocket">
                      Send spoken text to websocket for comannds.
                    </label>

                    <label class="d-block mb-4"
                      ><input
                        type="text"
                        id="txtWebsocketURL"
                        class="form-control"
                        value="ws://localhost:1880/stt"
                        placeholder="ws://localhost:1880/stt"
                        oninput="saveOption(this)"
                    /></label>

                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="cbRouteChatThroughWebsocket"
                      onchange="saveOption(this);"
                    />
                    <label
                      class="form-check-label"
                      for="cbRouteChatThroughWebsocket"
                    >
                      Route all chat through custom websocket. (Node-RED GPT
                      analysis)
                    </label>
                  </div>

                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="cbSendTextToAWSWebsocket"
                      onchange="saveOption(this); enableAWSWebsocket(this.checked);"
                    />
                    <label
                      class="form-check-label"
                      for="cbSendTextToAWSWebsocket"
                    >
                      Send spoken text to AWS for CCT and end user clients. Must
                      have this enabled right now for CCT.
                    </label>
                  </div>

                  <label class="d-block mb-4"
                    ><input
                      type="text"
                      id="txtAWSWebsocketURL"
                      class="form-control"
                      value="wss://ws.tts.bot"
                      placeholder="wss://ws.tts.bot"
                      oninput="saveOption(this)"
                  /></label>

                  <a href="node-red-example-command-flow.json"
                    >Example Node-RED Command Flow</a
                  >
                </div>

                <br />
                <label class="d-block mb-4"
                  ><input
                    type="text"
                    id="txtCCTURL"
                    class="form-control"
                    value="/translator.html?popup=true&src=en&dst=de&webkit-text-stroke-color=red&outline-color=red&shadow-color=red&border-color=red"
                    placeholder="test"
                    oninput="saveOption(this)"
                /></label>

                <label>
                  Font Family:
                  <select
                    id="fontFamily"
                    oninput="updatePreview(); saveOption(this);"
                  >
                    <option value="Arial, Helvetica, sans-serif">
                      Arial, Helvetica
                    </option>
                    <option value="Verdana, Geneva, sans-serif">
                      Verdana, Geneva
                    </option>
                    <option value="Georgia, serif">Georgia</option>
                    <option value="Times New Roman, Times, serif">
                      Times New Roman, Times
                    </option>
                    <option value="Courier New, Courier, monospace">
                      Courier New, Courier
                    </option>
                    <option value="Lucida Console, Monaco, monospace">
                      Lucida Console, Monaco
                    </option>
                    <option value="Tahoma, Geneva, sans-serif">
                      Tahoma, Geneva
                    </option>
                    <option value="Trebuchet MS, Helvetica, sans-serif">
                      Trebuchet MS, Helvetica
                    </option>
                    <option
                      value="Palatino Linotype, Book Antiqua, Palatino, serif"
                    >
                      Palatino Linotype, Book Antiqua, Palatino
                    </option>
                    <option value="Garamond, serif">Garamond</option>
                    <option value="Comic Sans MS, cursive">
                      Comic Sans MS
                    </option>
                    <option value="Impact, Charcoal, sans-serif">
                      Impact, Charcoal
                    </option>
                    <option value="Arial Black, Gadget, sans-serif">
                      Arial Black, Gadget
                    </option>
                    <option
                      value="Lucida Sans Unicode, Lucida Grande, sans-serif"
                    >
                      Lucida Sans Unicode, Lucida Grande
                    </option>
                    <option value="MS Sans Serif, Geneva, sans-serif">
                      MS Sans Serif, Geneva
                    </option>
                    <option value="MS Serif, New York, serif">
                      MS Serif, New York
                    </option>
                  </select>
                </label>
                <br />
                <label>
                  Font Size:
                  <input
                    type="number"
                    id="fontSize"
                    value="30"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <label>
                  Font Color:
                  <input
                    type="color"
                    id="cpFontColor"
                    value="#000000"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <br />
                <label>
                  Font Weight:
                  <input
                    type="number"
                    min="0"
                    max="1000"
                    id="fontWeight"
                    value="900"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <br />
                <label>
                  Font Color Opacity:
                  <input
                    type="range"
                    id="fontColorOpacity"
                    min="0"
                    max="1"
                    step="0.01"
                    value="1"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <br />
                <label>
                  Webkit Text Stroke Size:
                  <input
                    type="number"
                    id="webkitTextStrokeSize"
                    value="0.5"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <br />
                <label>
                  Webkit Text Stroke Color:
                  <input
                    type="color"
                    id="cpWebkitTextStrokeColor"
                    value="#8A2BE2"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <label>
                  Webkit Text Stroke Color Opacity:
                  <input
                    type="range"
                    id="webkitTextStrokeColorOpacity"
                    min="0"
                    max="1"
                    step="0.01"
                    value="1"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <br />
                <label>
                  Bubble Background Color:
                  <input
                    type="color"
                    id="cpBubbleBackgroundColor"
                    value="#636363"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <label>
                  Bubble Background Opacity:
                  <input
                    type="range"
                    id="bubbleBackgroundOpacity"
                    min="0"
                    max="1"
                    step="0.01"
                    value="0.5"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <br />
                <label>
                  Border Color:
                  <input
                    type="color"
                    id="cpBorderColor"
                    value="#8A2BE2"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <label>
                  Border Color Opacity:
                  <input
                    type="range"
                    id="borderColorOpacity"
                    min="0"
                    max="1"
                    step="0.01"
                    value="1"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <br />
                <label>
                  Border Width:
                  <input
                    type="number"
                    id="borderWidth"
                    value="5"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <br />
                <label>
                  Border Line Style:
                  <select
                    id="borderLineStyle"
                    oninput="updatePreview(); saveOption(this);"
                  >
                    <option value="solid">Solid</option>
                    <option value="dashed">Dashed</option>
                    <option value="dotted">Dotted</option>
                    <option value="double">Double</option>
                    <option value="groove">Groove</option>
                    <option value="ridge">Ridge</option>
                    <option value="inset">Inset</option>
                    <option value="outset">Outset</option>
                  </select>
                </label>
                <br />

                <br />
                <label>
                  Border Radius:
                  <input
                    type="number"
                    id="borderRadius"
                    value="25"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <br />
                <label>
                  HR Color:
                  <input
                    type="color"
                    id="cpHrColor"
                    value="#FC0000"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <label>
                  HR Color Opacity:
                  <input
                    type="range"
                    id="hrColorOpacity"
                    min="0"
                    max="1"
                    step="0.01"
                    value="1"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <br />
                <label>
                  Outline Color:
                  <input
                    type="color"
                    id="cpOutlineColor"
                    value="#8A2BE2"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <label>
                  Outline Color Opacity:
                  <input
                    type="range"
                    id="outlineColorOpacity"
                    min="0"
                    max="1"
                    step="0.01"
                    value="1"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <br />
                <label>
                  Outline Offset:
                  <input
                    type="number"
                    id="outlineOffset"
                    value="1"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <br />
                <label>
                  Shadow Color:
                  <input
                    type="color"
                    id="cpShadowColor"
                    value="#8A2BE2"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <label>
                  Shadow Color Opacity:
                  <input
                    type="range"
                    id="shadowColorOpacity"
                    min="0"
                    max="1"
                    step="0.01"
                    value="1"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <br />
                <label>
                  Shadow Offset Horizontal:
                  <input
                    type="number"
                    id="shadowOffsetHorizontal"
                    value="0"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <br />
                <label>
                  Shadow Offset Vertical:
                  <input
                    type="number"
                    id="shadowOffsetVertical"
                    value="0"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <br />
                <label>
                  Shadow Blur:
                  <input
                    type="number"
                    id="shadowBlur"
                    value="0"
                    oninput="updatePreview(); saveOption(this);"
                  />
                </label>
                <label class="d-block mb-4">
                  Padding:
                  <input
                    type="number"
                    id="padding"
                    class="form-control"
                    value="10"
                    min="0"
                    oninput="saveOption(this); updatePreview();"
                  />
                </label>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="cbUseFinalResultsOnly"
                    onchange="saveOption(this);"
                    checked
                  />
                  <label class="form-check-label" for="cbUseFinalResultsOnly">
                    Only send Webkit Voice Recognition final results.
                  </label>
                </div>
                <br />
                <br />
                <input
                  style="margin-bottom: 5px"
                  type="button"
                  value="Open Closed Captioning and Translation (CCT) Window (drag into OBS)"
                  onclick="toggleCCTPopup()"
                  draggable="true"
                />

                <input
                  type="button"
                  value="Copy CCT URL to clipboard"
                  onclick="copyCCTPopupURL()"
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="chatContainer" class="row overflow-hidden">
        <div class="button-container col-12" id="login"></div>

        <!-- Chat Boxes -->
        <div
          class="section-chat-boxes col-12 d-flex flex-column overflow-hidden"
        >
          <!-- Live Chat -->
          <div
            class="panel panel-primary row d-flex flex-column overflow-hidden flex-nowrap"
          >
            <div class="panel-heading panelHeading col-12">Live Chat</div>

            <div
              class="live-chat-wrapper col-12 d-flex flex-column overflow-hidden flex-nowrap"
            >
              <div id="livechatc" class="panel-body panelBody">
                <div class="subscribe" id="livechat"></div>
              </div>
            </div>
          </div>
        </div>
        <!-- Live Chat -->

        <!-- Send Message -->
        <div class="section-send-message mt-auto py-2">
          <!-- First row for inputs and placeholders -->
          <div class="row">
              <!-- Text to translate input -->
              <div class="col-md-5">
                  <dt>Text to translate:</dt>
                  <input type="text" id="message" class="form-control" onkeydown="message_key(this)" />
              </div>
        
              <!-- Language placeholder -->
              <div class="col-md-2">
                  <div id="chatLangPlaceholder"></div>
              </div>
        
              <!-- Voice placeholder -->
              <div class="col-md-3">
                  <div id="chatVoicePlaceholder"></div>
              </div>
        
              <!-- Voice option placeholder -->
              <div class="col-md-2">    
                  <div id="chatVoiceOptionPlaceholder"></div>
              </div>
          </div>
        
          <!-- Second row for the Send button -->
          <div class="row">
            <div class="col-md-auto">
              <button style="width: 100px" type="button" class="btn btn-dark" id="btn-send" onclick="sendMessage()">
                  Send
              </button>
          </div>
          <div class="col-md-auto">
              <div class="form-check mt-2">
                  <input class="form-check-input" type="checkbox" id="cbSpeakTranslation" onchange="saveOption(this)">
                  <label class="form-check-label" for="cbSpeakTranslation">
                      Speak translation
                  </label>
              </div>
          </div>
          </div>
        </div>
         
      
      </div>
    </div>

    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>

    <script src="aws-sdk.js"></script>
    <script src="tmi.js"></script>
    <script src="ssml_error.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.1/handlebars.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="awsTranslateSupportedLanguages.js"></script>
    <script src="tld-list-basic.js"></script>

    <script id="system-voice-template" type="text/x-handlebars-template">
      <dt>System Voice Selection: </dt>
      <dd class="clearfix">
        <select id="systemVoice" class="form-control" onchange="systemVoiceSelected(this.value)">
          {{#select voice}}
            {{#each voices.Voices}}
              <option value="{{Id}}">{{Id}}
                ({{LanguageCode}}
                --
                {{LanguageName}})</option>
            {{/each}}
          {{/select}}
        </select>
        <input
          type="hidden"
          size="10"
          name="voice-option"
          id="voice-option"
          value="{{voice_option}}"
        />
      </dd>
      <div id="systemVoiceOptionPlaceholder"></div>
    </script>

    <script id="system-voice-option-template" type="text/x-handlebars-template">
      <select id="systemVoiceOption" class="form-control" onchange="systemVoiceOptionSelected(this.value)">
        {{#select voiceOption}}
          {{#each voiceOptions}}
            <option value="{{this}}">{{this}}</option>
          {{/each}}
        {{/select}}
      </select>
    </script>


    <script id="default-chatter-voice-template" type="text/x-handlebars-template">
      <dt>Default Chatter Voice Selection: </dt>
      <dd class="clearfix">
        <select id="defaultChatterVoice" class="form-control" onchange="defaultChatterVoiceSelected(this.value)">
        {{#select voice}}
          {{#each voices.Voices}}
          <option value="{{Id}}">{{Id}}
            ({{LanguageCode}}
            --
            {{LanguageName}})</option>
          {{/each}}
        {{/select}}
        </select>
        <input
        type="hidden"
        size="10"
        name="default-chatter-voice-option"
        id="default-chatter-voice-option"
        value="{{voice_option}}"
        />
      </dd>
      <div id="defaultChatterVoiceOptionPlaceholder"></div>
      </script>
    
      <script id="default-chatter-voice-option-template" type="text/x-handlebars-template">

      <select id="defaultChatterVoiceOption" class="form-control" onchange="defaultChatterVoiceOptionSelected(this.value)">
        {{#select voiceOption}}
        {{#each voiceOptions}}
          <option value="{{this}}">{{this}}</option>
        {{/each}}
        {{/select}}
      </select>
      </script>    


    <script id="sts-voice-template" type="text/x-handlebars-template">
      <dt>STS Voice Selection: </dt>
      <dd class="clearfix">
        <select id="stsVoice" onchange="stsVoiceSelected(this.value)">
          {{#select voice}}
            {{#each voices.Voices}}
              <option value="{{Id}}">{{Id}}
                ({{LanguageCode}}
                --
                {{LanguageName}})</option>
            {{/each}}
          {{/select}}
        </select>
        <input
          type="hidden"
          size="10"
          name="sts-voice-option"
          id="sts-voice-option"
          value="{{voice_option}}"
        />
      </dd>
      <div id="stsVoiceOptionPlaceholder"></div>
    </script>

    <script id="sts-voice-option-template" type="text/x-handlebars-template">
      <select id="stsVoiceOption" onchange="stsVoiceOptionSelected(this.value)">
        {{#select voiceOption}}
          {{#each voiceOptions}}
            <option value="{{this}}">{{this}}</option>
          {{/each}}
        {{/select}}
      </select>
    </script>


    <script id="chat-voice-template" type="text/x-handlebars-template">
      <dt>Speak with voice: </dt>
      <dd class="clearfix">
        <select id="chatVoice" class="form-control" onchange="chatVoiceSelected(this.value)">
          {{#select voice}}
            {{#each voices.Voices}}
              <option value="{{Id}}">{{Id}}
                ({{LanguageCode}}
                --
                {{LanguageName}})</option>
            {{/each}}
          {{/select}}
        </select>
        <input
          type="hidden"
          size="10"
          name="chat-voice-option"
          id="chat-voice-option"
          value="{{voice_option}}"
        />
      </dd>
    </script>

    <script id="chat-voice-option-template" type="text/x-handlebars-template">
      <dt>Engine:</dt>
      <select id="chatVoiceOption" class="form-control" onchange="chatVoiceOptionSelected(this.value)">
        {{#select voiceOption}}
          {{#each voiceOptions}}
            <option value="{{this}}">{{this}}</option>
          {{/each}}
        {{/select}}
      </select>
    </script>

    <script id="system-lang-template" type="text/x-handlebars-template">
      <dt>{{name}}</dt>
      <dd class="clearfix">
        <select
          id="{{elementId}}"
          class="form-control"
          onchange="saveLocalStorageLang('{{elementId}}')"
        >
          <option value="auto">Auto</option>
          {{#each langs}}
            <option value="{{this.languageCode}}">{{this.languageName}}
              ({{this.languageCode}})</option>
          {{/each}}
        </select>
      </dd>
    </script>

    <script id="sts-lang-template" type="text/x-handlebars-template">
      <dt>Translate to:</dt>
      <dd class="clearfix">
        <select
          id="{{elementId}}"
          class="form-control"
          onchange="saveLocalStorageLang('{{elementId}}')"
        >
          <option value="choose">Choose Language</option>
          {{#each langs}}
            <option value="{{this.languageCode}}">{{this.languageName}}
              ({{this.languageCode}})</option>
          {{/each}}
        </select>
      </dd>
    </script>      

    <script id="chat-lang-template" type="text/x-handlebars-template">
      <dt>Translate to:</dt>
      <dd class="clearfix">
        <select
          id="{{elementId}}"
          class="form-control"
          onchange="saveLocalStorageLang('{{elementId}}')"
        >
          <option value="choose">Choose Language</option>
          {{#each langs}}
            <option value="{{this.languageCode}}">{{this.languageName}}
              ({{this.languageCode}})</option>
          {{/each}}
        </select>
      </dd>
    </script>    

    <script src="js/script.js"></script>
  </body>
</html>
